version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - ask_option
  - choose_option
  - ask_document
  - nlu_fallback
  - out_of_scope
  - conversation_end
  - ask_mood_memory

entities:
  - option

actions:
  - action_handle_fallback
  - action_reset_fallback
  - action_save_mood
  - action_recall_mood
  - action_answer_from_chroma

slots:
  option:
    type: text
    mappings:
      - type: from_entity
        entity: option
  
  fallback_count:
    type: float
    initial_value: 0
    influence_conversation: false
    mappings:
      - type: custom
  
  mood:
    type: text
    influence_conversation: true
    mappings:
      - type: custom

  last_doc_query:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

responses:
  utter_greet:
  - text: "Ciao! Come posso aiutarti?"

  utter_cheer_up: 
  - text: "Ecco qualcosa per tirarti su il morale:" 
    image: "https://www.tattooforaweek.com/cdn/shop/products/smile-smiley-temporary-tattoo_1000x.jpg?v=1656001188"

  utter_apologize:
  - text: "Mi dispiace se non sono stato d'aiuto."

  utter_happy:
  - text: "Fantastico, continua così!"

  utter_iamabot:
  - text: "Sono un bot, alimentato da Rasa."

  utter_ask_option:
    - text: "Scegli un'opzione:"
      buttons:
        - title: "Opzione A"
          payload: '/choose_option{{"option":"A"}}'
        - title: "Opzione B"
          payload: '/choose_option{{"option":"B"}}'

  utter_chosen_option:
    - text: "Hai scelto l'opzione {option} ✅"

  utter_show_document:
    - text: "Ecco il documento che hai richiesto:"
      attachment: 
        type: "file"
        url: "https://economiaemanagement.dip.unipv.it/sites/dip10/files/2022-07/linee_guida_tesi_su_tirocinio.pdf"

  utter_fallback:
    - text: "Non so la risposta a questa domanda. Mi dispiace"

  utter_out_of_scope:
    - text: "Mi dispiace, non ho capito bene. Puoi riformulare?"
  
  utter_conversation_end:
    - text: "Grazie per aver utilizzato il nostro servizio. Buona giornata!"

  utter_contact_operator:
    - text: "Mi dispiace, non riesco a capire la tua richiesta. Ti consiglio di contattare un operatore umano."

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
