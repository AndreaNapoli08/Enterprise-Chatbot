version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - ask_option
  - choose_yes_document
  - choose_no_document
  - no_close_conversation
  - yes_close_conversation
  - ask_document
  - nlu_fallback
  - out_of_scope
  - conversation_end
  - ask_mood
  - ask_information_relazione
  - ask_information_aziendale
  - choose_document
  - book_meeting_room
  - provide_date
  - provide_participants_number
  - provide_room_features
  - ask_my_reservations
  - delete_reservation
  - change_password
  - receive_new_password

entities:
  - option
  - file_name
  - appointment_date
  - appointment_hour
  - appointment_duration
  - person_picker
  - room_features
  - id_reservation
  - old_password
  - new_password

actions:
  - action_handle_fallback
  - action_reset_fallback
  - action_answer_from_chroma
  - action_save_context
  - action_query_context
  - action_send_local_pdf
  - action_list_available_documents
  - action_check_user_role
  - action_availability_check_room
  - action_get_reservation
  - action_delete_reservation
  - action_change_password

slots:
  option:
    type: text
    mappings:
      - type: from_entity
        entity: option
  
  fallback_count:
    type: float
    initial_value: 0
    influence_conversation: false
    mappings:
      - type: custom

  auto_context:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  file_name:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
  
  appointment_date:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: appointment_date

  appointment_hour:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: appointment_hour
    
  appointment_duration:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: appointment_duration

  person_picker:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: person_picker
        
  room_features:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: room_features
  
  id_reservation:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: id_reservation

  old_password:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: old_password

  new_password:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: new_password

responses:
  utter_greet:
  - text: "Ciao! Come posso aiutarti?"

  utter_cheer_up: 
  - text: "Ecco qualcosa per tirarti su il morale:" 
    image: "https://www.tattooforaweek.com/cdn/shop/products/smile-smiley-temporary-tattoo_1000x.jpg?v=1656001188"

  utter_apologize:
  - text: "Mi dispiace se non sono stato d'aiuto."

  utter_happy:
  - text: "Fantastico, continua così!"

  utter_iamabot:
  - text: "Sono un bot, alimentato da Rasa."

  # utter_ask_option:
  #   - text: "Scegli un'opzione:"
  #     buttons:
  #       - title: "Opzione A"
  #         payload: '/choose_option{{"option":"A"}}'
  #       - title: "Opzione B"
  #         payload: '/choose_option{{"option":"B"}}'

  # utter_chosen_option:
  #   - text: "Hai scelto l'opzione {option} ✅"

  utter_ask_option_search_document:
    - text: "Vuoi che cerco nei documenti?"
      buttons:
      - title: "Si"
        payload: "/choose_yes_document"
      - title: "No"
        payload: "/choose_no_document"

  utter_ask_option_close_conversation:
    - text: "Ti serve ancora aiuto?"
      buttons:
      - title: "Si"
        payload: "/no_close_conversation"
      - title: "No"
        payload: "/yes_close_conversation"

  utter_option_no:
    - text: "Va bene, non cerco nei documenti per ora."

  utter_out_of_scope:
    - text: "Mi dispiace, non ho capito bene. Puoi riformulare?"
  
  utter_close_conversation:
    - text: "Grazie per aver utilizzato il nostro servizio. Buona giornata!"

  utter_no_close_conversation:
    - text: "Va bene, sono qui per aiutarti"

  utter_contact_operator:
    - text: "Mi dispiace, non riesco a capire la tua richiesta. Ti consiglio di contattare un operatore umano."

  utter_ask_meeting_date:
    - custom:
        type: "date_picker"

  utter_ask_partecipants_number:
    - custom:
        type: "number_partecipants"

  utter_ask_features_room:
    - custom:
        type: "features_meeting_room"

  utter_change_password:
    - custom:
        type: "change_password"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
